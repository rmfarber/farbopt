# a 60 second quick test
MAX_RUN="-DMAX_RUNTIME=60"

# The location of the NLOPT directory
NLOPT_DIR=$PWD/../../install_gcc

APP=pca
GCC_FLAGS="-DUSE_LINEAR -O3 -fopenmp -std=c99 -w "
FLAGS="-DUSE_LINEAR -DUSE_CUDA -w -O3 -Xcompiler -fopenmp -arch=compute_35 -use_fast_math "
INC=$NLOPT_DIR/include
LIB=$NLOPT_DIR/lib

gcc $GCC_FLAGS genData.c -o gen_$APP

nvcc -x cu $FLAGS ../train.c $MAX_RUN -I . -I $INC  -L $LIB -lnlopt -lm -o train_$APP.cuda

gcc $GCC_FLAGS ../pred.c -I . -lm -o pred_$APP

