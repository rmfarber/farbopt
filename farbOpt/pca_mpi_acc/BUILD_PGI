. ./common.sh

FLAGS="-D$ACTIVATION -w -O3 -use_fast_math -Minline=myFunc"
NO_IO_TEST="-DNO_IO_EXAMPLES=$EXAMPLES"

INC=$NLOPT_DIR/include
LIB=$NLOPT_DIR/lib

INC+=" -I $MPICH_DIR/include "
LIB+=" -L $MPICH_DIR/lib "


pgcc $FLAGS genData.c -o gen_$APP

pgcc -acc $FLAGS -ta=nvidia,6.0,cc35 $NO_IO_TEST -Minfo=accel $ACC_FLAGS ../mpiTrain.c $MAX_RUN -I . -I $INC  -L $LIB -lnlopt -lmpich -lm -o mpiTrain_$APP.acc

pgcc $FLAGS ../pred.c -I . -lm -o pred_$APP


