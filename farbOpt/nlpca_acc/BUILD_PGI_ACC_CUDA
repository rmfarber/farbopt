. ./common.sh

FLAGS="-D$ACTIVATION -w -O3 -use_fast_math "

INC=$NLOPT_DIR/include
LIB=" -L $NLOPT_DIR/lib -L /usr/local/cuda-7.0/lib64"

pgcc $FLAGS genData.c -o gen_$APP

nvcc -x cu $FLAGS -I . -I $INC -c cudaFunc.cc

pgcc -acc $FLAGS -DCALL_CUDA -Minline=myFunc -ta=nvidia,6.5,cc35 -Minfo=accel ../train.c cudaFunc.o $MAX_RUN -I . -I $INC  $LIB -lnlopt -lcudart -lm -o train_$APP.acc

pgcc $FLAGS ../pred.c -I . -lm -o pred_$APP


