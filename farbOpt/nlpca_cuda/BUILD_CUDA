APP=nlpca
GCC_FLAGS="-DUSE_ELLIOTT -O3 -fopenmp -std=c99 -w "
FLAGS="-DUSE_ELLIOTT -DUSE_CUDA -w -O3 -Xcompiler -fopenmp -arch=compute_35 -use_fast_math "
INC=$HOME/install_cuda/include
LIB=$HOME/install_cuda/lib

gcc $GCC_FLAGS genData.c -o gen_$APP

ln -s ../train.c train.cu
nvcc $FLAGS train.cu -I . -I $INC  -L $LIB -lnlopt -lm -o train_$APP.cuda
rm train.cu

gcc $GCC_FLAGS ../pred.c -I . -lm -o pred_$APP

